var Ve=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);import{L as Re,a as v,F as $,C as w,S as ze,P as qe,D as Se,M as V,b as H,V as be,s as ee,T as Xe,I as We,c as Le,d as Ye,B as te,e as Ie,f as Ce,R as oe,g as Qe,h as ne,i as Je,j as he,k as Ze,l as $e,m as et,n as Ne,o as tt,p as nt,q as st,r as it,t as rt,u as ot,G as se,v as Oe,w as at,O as ct,x as ve,A as ut,y as lt,z as dt,E as Fe,H as ht,J as ke,N as ft,K as pt,Q as mt,U as gt,W as Tt,X as _t,Y as yt,Z as At,_ as Et,$ as ge,a0 as Mt,a1 as wt,a2 as Te,a3 as xt,a4 as Q,a5 as Rt,a6 as St,a7 as bt,a8 as Lt,a9 as It,aa as Ct,ab as Nt,ac as Ot}from"./OrbitControls-DTIdDn8-.js";var fn=Ve((Ge,de)=>{var fe=function(){this._tweens={},this._tweensAddedDuringUpdate={}};fe.prototype={getAll:function(){return Object.keys(this._tweens).map((function(n){return this._tweens[n]}).bind(this))},removeAll:function(){this._tweens={}},add:function(n){this._tweens[n.getId()]=n,this._tweensAddedDuringUpdate[n.getId()]=n},remove:function(n){delete this._tweens[n.getId()],delete this._tweensAddedDuringUpdate[n.getId()]},update:function(n,e){var t=Object.keys(this._tweens);if(t.length===0)return!1;for(n=n!==void 0?n:y.now();0<t.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<t.length;i++){var s=this._tweens[t[i]];s&&s.update(n)===!1&&(s._isPlaying=!1,e||delete this._tweens[t[i]])}t=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var y=new fe;y.Group=fe,y._nextId=0,y.nextId=function(){return y._nextId++},typeof self>"u"&&typeof process<"u"&&process.hrtime?y.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?y.now=self.performance.now.bind(self.performance):Date.now!==void 0?y.now=Date.now:y.now=function(){return new Date().getTime()},y.Tween=function(n,e){this._object=n,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=y.Easing.Linear.None,this._interpolationFunction=y.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||y,this._id=y.nextId()},y.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(n,e){return this._valuesEnd=Object.create(n),e!==void 0&&(this._duration=e),this},duration:function(n){return this._duration=n,this},start:function(n){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=n!==void 0?typeof n=="string"?y.now()+parseFloat(n):n:y.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(this._valuesEnd[e].length===0)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}this._object[e]!==void 0&&(this._valuesStart[e]=this._object[e],!(this._valuesStart[e]instanceof Array)&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,this._onStopCallback!==null&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var n=0,e=this._chainedTweens.length;n<e;n++)this._chainedTweens[n].stop()},group:function(n){return this._group=n,this},delay:function(n){return this._delayTime=n,this},repeat:function(n){return this._repeat=n,this},repeatDelay:function(n){return this._repeatDelayTime=n,this},yoyo:function(n){return this._yoyo=n,this},easing:function(n){return this._easingFunction=n,this},interpolation:function(n){return this._interpolationFunction=n,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(n){return this._onStartCallback=n,this},onUpdate:function(n){return this._onUpdateCallback=n,this},onComplete:function(n){return this._onCompleteCallback=n,this},onStop:function(n){return this._onStopCallback=n,this},update:function(n){var e,t,i;if(n<this._startTime)return!0;for(e in this._onStartCallbackFired===!1&&(this._onStartCallback!==null&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),t=(n-this._startTime)/this._duration,t=this._duration===0||1<t?1:t,i=this._easingFunction(t),this._valuesEnd)if(this._valuesStart[e]!==void 0){var s=this._valuesStart[e]||0,r=this._valuesEnd[e];r instanceof Array?this._object[e]=this._interpolationFunction(r,i):(typeof r=="string"&&(r=r.charAt(0)==="+"||r.charAt(0)==="-"?s+parseFloat(r):parseFloat(r)),typeof r=="number"&&(this._object[e]=s+(r-s)*i))}if(this._onUpdateCallback!==null&&this._onUpdateCallback(this._object),t!==1)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if(typeof this._valuesEnd[e]=="string"&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=n+this._repeatDelayTime:this._startTime=n+this._delayTime,!0}this._onCompleteCallback!==null&&this._onCompleteCallback(this._object);for(var c=0,a=this._chainedTweens.length;c<a;c++)this._chainedTweens[c].start(this._startTime+this._duration);return!1}},y.Easing={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(2-Math.pow(2,-10*(n-1)))}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin(5*(n-.1)*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?-.5*Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)+1}},Back:{In:function(n){return n*n*(2.70158*n-1.70158)},Out:function(n){return--n*n*(2.70158*n+1.70158)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?n*n*((1+e)*n-e)*.5:.5*((n-=2)*n*((1+e)*n+e)+2)}},Bounce:{In:function(n){return 1-y.Easing.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?.5*y.Easing.Bounce.In(2*n):.5*y.Easing.Bounce.Out(2*n-1)+.5}}},y.Interpolation={Linear:function(n,e){var t=n.length-1,i=t*e,s=Math.floor(i),r=y.Interpolation.Utils.Linear;return e<0?r(n[0],n[1],i):1<e?r(n[t],n[t-1],t-i):r(n[s],n[t<s+1?t:s+1],i-s)},Bezier:function(n,e){for(var t=0,i=n.length-1,s=Math.pow,r=y.Interpolation.Utils.Bernstein,o=0;o<=i;o++)t+=s(1-e,i-o)*s(e,o)*n[o]*r(i,o);return t},CatmullRom:function(n,e){var t=n.length-1,i=t*e,s=Math.floor(i),r=y.Interpolation.Utils.CatmullRom;return n[0]===n[t]?(e<0&&(s=Math.floor(i=t*(1+e))),r(n[(s-1+t)%t],n[s],n[(s+1)%t],n[(s+2)%t],i-s)):e<0?n[0]-(r(n[0],n[0],n[1],n[1],-i)-n[0]):1<e?n[t]-(r(n[t],n[t],n[t-1],n[t-1],i-t)-n[t]):r(n[s?s-1:0],n[s],n[t<s+1?t:s+1],n[t<s+2?t:s+2],i-s)},Utils:{Linear:function(n,e,t){return(e-n)*t+n},Bernstein:function(n,e){var t=y.Interpolation.Utils.Factorial;return t(n)/t(e)/t(n-e)},Factorial:function(){var n=[1];return function(e){var t=1;if(n[e])return n[e];for(var i=e;1<i;i--)t*=i;return n[e]=t}}(),CatmullRom:function(n,e,t,i,s){var r=.5*(t-n),o=.5*(i-e),c=s*s;return(2*e-2*t+r+o)*(s*c)+(-3*e+3*t-2*r-o)*c+r*s+e}}},function(n){typeof define=="function"&&define.amd?define([],function(){return y}):typeof de<"u"&&typeof Ge=="object"?de.exports=y:n!==void 0&&(n.TWEEN=y)}(void 0);class vt extends Re{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Dt(t)}),this.register(function(t){return new Kt(t)}),this.register(function(t){return new Vt(t)}),this.register(function(t){return new Ut(t)}),this.register(function(t){return new Ht(t)}),this.register(function(t){return new Gt(t)}),this.register(function(t){return new Bt(t)}),this.register(function(t){return new jt(t)}),this.register(function(t){return new kt(t)}),this.register(function(t){return new zt(t)})}load(e,t,i,s){const r=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=v.extractUrlBase(e),this.manager.itemStart(e);const c=function(u){s?s(u):console.error(u),r.manager.itemError(e),r.manager.itemEnd(e)},a=new $(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{r.parse(u,o,function(d){t(d),r.manager.itemEnd(e)},c)}catch(d){c(d)}},i,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},c={};if(typeof e=="string")r=e;else if(v.decodeText(new Uint8Array(e,0,4))===Pe){try{o[_.KHR_BINARY_GLTF]=new qt(e)}catch(l){s&&s(l);return}r=o[_.KHR_BINARY_GLTF].content}else r=v.decodeText(new Uint8Array(e));const a=JSON.parse(r);if(a.asset===void 0||a.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new rn(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const l=this.pluginCallbacks[d](u);c[l.name]=l,o[l.name]=!0}if(a.extensionsUsed)for(let d=0;d<a.extensionsUsed.length;++d){const l=a.extensionsUsed[d],h=a.extensionsRequired||[];switch(l){case _.KHR_MATERIALS_UNLIT:o[l]=new Pt;break;case _.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[l]=new Yt;break;case _.KHR_DRACO_MESH_COMPRESSION:o[l]=new Xt(a,this.dracoLoader);break;case _.KHR_TEXTURE_TRANSFORM:o[l]=new Wt;break;case _.KHR_MESH_QUANTIZATION:o[l]=new Qt;break;default:h.indexOf(l)>=0&&c[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}u.setExtensions(o),u.setPlugins(c),u.parse(i,s)}}function Ft(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const _={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class kt{constructor(e){this.parser=e,this.name=_.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,a=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let u;const d=new w(16777215);a.color!==void 0&&d.fromArray(a.color);const l=a.range!==void 0?a.range:0;switch(a.type){case"directional":u=new Se(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new qe(d),u.distance=l;break;case"spot":u=new ze(d),u.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,u.angle=a.spot.outerConeAngle,u.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return u.position.set(0,0,0),u.decay=2,a.intensity!==void 0&&(u.intensity=a.intensity),u.name=t.createUniqueName(a.name||"light_"+e),s=Promise.resolve(u),t.cache.add(i,s),s}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],c=(r.extensions&&r.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(a){return i._getNodeRef(t.cache,c,a)})}}class Pt{constructor(){this.name=_.KHR_MATERIALS_UNLIT}getMaterialType(){return V}extendParams(e,t,i){const s=[];e.color=new w(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(s)}}class Dt{constructor(e){this.parser=e,this.name=_.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:H}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const c=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new be(c,c)}return Promise.all(r)}}class Ut{constructor(e){this.parser=e,this.name=_.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:H}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new w(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Ht{constructor(e){this.parser=e,this.name=_.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:H}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Gt{constructor(e){this.parser=e,this.name=_.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:H}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const c=o.attenuationColor||[1,1,1];return t.attenuationColor=new w(c[0],c[1],c[2]),Promise.all(r)}}class Bt{constructor(e){this.parser=e,this.name=_.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:H}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class jt{constructor(e){this.parser=e,this.name=_.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:H}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const c=o.specularColorFactor||[1,1,1];return t.specularColor=new w(c[0],c[1],c[2]),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture).then(function(a){a.encoding=ee})),Promise.all(r)}}class Kt{constructor(e){this.parser=e,this.name=_.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=i.images[r.source],c=t.options.ktx2Loader;if(!c){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,c)}}class Vt{constructor(e){this.parser=e,this.name=_.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],c=s.images[o.source];let a=i.textureLoader;if(c.uri){const u=i.options.manager.getHandler(c.uri);u!==null&&(a=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,c,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class zt{constructor(e){this.name=_.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,o.ready]).then(function(c){const a=s.byteOffset||0,u=s.byteLength||0,d=s.count,l=s.byteStride,h=new ArrayBuffer(d*l),f=new Uint8Array(c[0],a,u);return o.decodeGltfBuffer(new Uint8Array(h),d,l,f,s.mode,s.filter),h})}else return null}}const Pe="glTF",j=12,_e={JSON:1313821514,BIN:5130562};class qt{constructor(e){this.name=_.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,j);if(this.header={magic:v.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Pe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-j,s=new DataView(e,j);let r=0;for(;r<i;){const o=s.getUint32(r,!0);r+=4;const c=s.getUint32(r,!0);if(r+=4,c===_e.JSON){const a=new Uint8Array(e,j+r,o);this.content=v.decodeText(a)}else if(c===_e.BIN){const a=j+r;this.body=e.slice(a,a+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Xt{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,c={},a={},u={};for(const d in o){const l=ce[d]||d.toLowerCase();c[l]=o[d]}for(const d in e.attributes){const l=ce[d]||d.toLowerCase();if(o[d]!==void 0){const h=i.accessors[e.attributes[d]],f=X[h.componentType];u[l]=f,a[l]=h.normalized===!0}}return t.getDependency("bufferView",r).then(function(d){return new Promise(function(l){s.decodeDracoFile(d,function(h){for(const f in h.attributes){const p=h.attributes[f],g=a[f];g!==void 0&&(p.normalized=g)}l(h)},c,u)})})}}class Wt{constructor(){this.name=_.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ae extends he{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),c={specular:{value:new w().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=c,this.onBeforeCompile=function(a){for(const u in c)a.uniforms[u]=c[u];a.fragmentShader=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return c.specular.value},set:function(a){c.specular.value=a}},specularMap:{get:function(){return c.specularMap.value},set:function(a){c.specularMap.value=a,a?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return c.glossiness.value},set:function(a){c.glossiness.value=a}},glossinessMap:{get:function(){return c.glossinessMap.value},set:function(a){c.glossinessMap.value=a,a?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Yt{constructor(){this.name=_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return ae}extendParams(e,t,i){const s=t.extensions[this.name];e.color=new w(1,1,1),e.opacity=1;const r=[];if(Array.isArray(s.diffuseFactor)){const o=s.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(s.diffuseTexture!==void 0&&r.push(i.assignTexture(e,"map",s.diffuseTexture)),e.emissive=new w(0,0,0),e.glossiness=s.glossinessFactor!==void 0?s.glossinessFactor:1,e.specular=new w(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),s.specularGlossinessTexture!==void 0){const o=s.specularGlossinessTexture;r.push(i.assignTexture(e,"glossinessMap",o)),r.push(i.assignTexture(e,"specularMap",o))}return Promise.all(r)}createMaterial(e){const t=new ae(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=Xe,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class Qt{constructor(){this.name=_.KHR_MESH_QUANTIZATION}}class F extends Rt{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}}F.prototype.beforeStart_=F.prototype.copySampleValue_;F.prototype.afterEnd_=F.prototype.copySampleValue_;F.prototype.interpolate_=function(n,e,t,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,c=o*2,a=o*3,u=i-e,d=(t-e)/u,l=d*d,h=l*d,f=n*a,p=f-a,g=-2*h+3*l,m=h-l,T=1-g,E=m-l+d;for(let A=0;A!==o;A++){const B=r[p+A+o],N=r[p+A+c]*u,S=r[f+A+o],M=r[f+A]*u;s[A]=T*B+E*N+g*S+m*M}return s};const Jt=new Lt;class Zt extends F{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return Jt.fromArray(r).normalize().toArray(r),r}}const b={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},X={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ye={9728:ft,9729:Ie,9984:pt,9985:mt,9986:gt,9987:Ce},Ae={33071:Tt,33648:_t,10497:oe},Ee={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ce={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},I={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$t={CUBICSPLINE:void 0,LINEAR:ve,STEP:yt},ie={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function en(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new he({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:At})),n.DefaultMaterial}function K(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function O(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function tn(n,e,t){let i=!1,s=!1;for(let c=0,a=e.length;c<a;c++){const u=e[c];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(s=!0),i&&s)break}if(!i&&!s)return Promise.resolve(n);const r=[],o=[];for(let c=0,a=e.length;c<a;c++){const u=e[c];if(i){const d=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;r.push(d)}if(s){const d=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;o.push(d)}}return Promise.all([Promise.all(r),Promise.all(o)]).then(function(c){const a=c[0],u=c[1];return i&&(n.morphAttributes.position=a),s&&(n.morphAttributes.normal=u),n.morphTargetsRelative=!0,n})}function nn(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function sn(n){const e=n.extensions&&n.extensions[_.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+Me(e.attributes):t=n.indices+":"+Me(n.attributes)+":"+n.mode,t}function Me(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function ue(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class rn{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ft,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap<"u"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new We(this.options.manager):this.textureLoader=new Le(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new $(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const c={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};K(r,c,s),O(c,s),Promise.all(i._invokeAll(function(a){return a.afterRoot&&a.afterRoot(c)})).then(function(){e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let c=0,a=o.length;c<a;c++)e[o[c]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,c)=>{const a=this.associations.get(o);a!=null&&this.associations.set(c,a);for(const[u,d]of o.children.entries())r(d,c.children[u])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this.loadAnimation(t);break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[_.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(v.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0)return Promise.resolve(null);const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const c=o[0],a=Ee[s.type],u=X[s.componentType],d=u.BYTES_PER_ELEMENT,l=d*a,h=s.byteOffset||0,f=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,p=s.normalized===!0;let g,m;if(f&&f!==l){const T=Math.floor(h/f),E="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+T+":"+s.count;let A=t.cache.get(E);A||(g=new u(c,T*f,s.count*f/d),A=new Ye(g,f/d),t.cache.add(E,A)),m=new Et(A,a,h%f/d,p)}else c===null?g=new u(s.count*a):g=new u(c,h,s.count*a),m=new te(g,a,p);if(s.sparse!==void 0){const T=Ee.SCALAR,E=X[s.sparse.indices.componentType],A=s.sparse.indices.byteOffset||0,B=s.sparse.values.byteOffset||0,N=new E(o[1],A,s.sparse.count*T),S=new u(o[2],B,s.sparse.count*a);c!==null&&(m=new te(m.array.slice(),m.itemSize,m.normalized));for(let M=0,k=N.length;M<k;M++){const P=N[M];if(m.setX(P,S[M*a]),a>=2&&m.setY(P,S[M*a+1]),a>=3&&m.setZ(P,S[M*a+2]),a>=4&&m.setW(P,S[M*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e],r=t.images[s.source];let o=this.textureLoader;if(r.uri){const c=i.manager.getHandler(r.uri);c!==null&&(o=c)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,i){const s=this,r=this.json,o=this.options,c=r.textures[e],a=(t.uri||t.bufferView)+":"+c.sampler;if(this.textureCache[a])return this.textureCache[a];const u=self.URL||self.webkitURL;let d=t.uri||"",l=!1;if(t.bufferView!==void 0)d=s.getDependency("bufferView",t.bufferView).then(function(f){l=!0;const p=new Blob([f],{type:t.mimeType});return d=u.createObjectURL(p),d});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(d).then(function(f){return new Promise(function(p,g){let m=p;i.isImageBitmapLoader===!0&&(m=function(T){const E=new ge(T);E.needsUpdate=!0,p(E)}),i.load(v.resolveURL(f,o.path),m,void 0,g)})}).then(function(f){l===!0&&u.revokeObjectURL(d),f.flipY=!1,c.name&&(f.name=c.name);const g=(r.samplers||{})[c.sampler]||{};return f.magFilter=ye[g.magFilter]||Ie,f.minFilter=ye[g.minFilter]||Ce,f.wrapS=Ae[g.wrapS]||oe,f.wrapT=Ae[g.wrapT]||oe,s.associations.set(f,{textures:e}),f}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",d),null});return this.textureCache[a]=h,h}assignTexture(e,t,i){const s=this;return this.getDependency("texture",i.index).then(function(r){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[_.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[_.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const c=s.associations.get(r);r=s.extensions[_.KHR_TEXTURE_TRANSFORM].extendTexture(r,o),s.associations.set(r,c)}}return e[t]=r,r})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+i.uuid;let a=this.cache.get(c);a||(a=new Qe,ne.prototype.copy.call(a,i),a.color.copy(i.color),a.map=i.map,a.sizeAttenuation=!1,this.cache.add(c,a)),i=a}else if(e.isLine){const c="LineBasicMaterial:"+i.uuid;let a=this.cache.get(c);a||(a=new Je,ne.prototype.copy.call(a,i),a.color.copy(i.color),this.cache.add(c,a)),i=a}if(s||r||o){let c="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),s&&(c+="derivative-tangents:"),r&&(c+="vertex-colors:"),o&&(c+="flat-shading:");let a=this.cache.get(c);a||(a=i.clone(),r&&(a.vertexColors=!0),o&&(a.flatShading=!0),s&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(c,a),this.associations.set(a,this.associations.get(i))),i=a}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return he}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const c={},a=r.extensions||{},u=[];if(a[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const l=s[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=l.getMaterialType(),u.push(l.extendParams(c,r,t))}else if(a[_.KHR_MATERIALS_UNLIT]){const l=s[_.KHR_MATERIALS_UNLIT];o=l.getMaterialType(),u.push(l.extendParams(c,r,t))}else{const l=r.pbrMetallicRoughness||{};if(c.color=new w(1,1,1),c.opacity=1,Array.isArray(l.baseColorFactor)){const h=l.baseColorFactor;c.color.fromArray(h),c.opacity=h[3]}l.baseColorTexture!==void 0&&u.push(t.assignTexture(c,"map",l.baseColorTexture)),c.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,c.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(c,"metalnessMap",l.metallicRoughnessTexture)),u.push(t.assignTexture(c,"roughnessMap",l.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,c)})))}r.doubleSided===!0&&(c.side=Ze);const d=r.alphaMode||ie.OPAQUE;if(d===ie.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.format=$e,c.transparent=!1,d===ie.MASK&&(c.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==V&&(u.push(t.assignTexture(c,"normalMap",r.normalTexture)),c.normalScale=new be(1,1),r.normalTexture.scale!==void 0)){const l=r.normalTexture.scale;c.normalScale.set(l,l)}return r.occlusionTexture!==void 0&&o!==V&&(u.push(t.assignTexture(c,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==V&&(c.emissive=new w().fromArray(r.emissiveFactor)),r.emissiveTexture!==void 0&&o!==V&&u.push(t.assignTexture(c,"emissiveMap",r.emissiveTexture)),Promise.all(u).then(function(){let l;return o===ae?l=s[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):l=new o(c),r.name&&(l.name=r.name),l.map&&(l.map.encoding=ee),l.emissiveMap&&(l.emissiveMap.encoding=ee),O(l,r),t.associations.set(l,{materials:e}),r.extensions&&K(s,l,r),l})}createUniqueName(e){const t=et.sanitizeNodeName(e||"");let i=t;for(let s=1;this.nodeNamesUsed[i];++s)i=t+"_"+s;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(c){return i[_.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(a){return we(a,c,t)})}const o=[];for(let c=0,a=e.length;c<a;c++){const u=e[c],d=sn(u),l=s[d];if(l)o.push(l.promise);else{let h;u.extensions&&u.extensions[_.KHR_DRACO_MESH_COMPRESSION]?h=r(u):h=we(new Ne,u,t),s[d]={primitive:u,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,c=[];for(let a=0,u=o.length;a<u;a++){const d=o[a].material===void 0?en(this.cache):this.getDependency("material",o[a].material);c.push(d)}return c.push(t.loadGeometries(o)),Promise.all(c).then(function(a){const u=a.slice(0,a.length-1),d=a[a.length-1],l=[];for(let f=0,p=d.length;f<p;f++){const g=d[f],m=o[f];let T;const E=u[f];if(m.mode===b.TRIANGLES||m.mode===b.TRIANGLE_STRIP||m.mode===b.TRIANGLE_FAN||m.mode===void 0)T=r.isSkinnedMesh===!0?new tt(g,E):new nt(g,E),T.isSkinnedMesh===!0&&!T.geometry.attributes.skinWeight.normalized&&T.normalizeSkinWeights(),m.mode===b.TRIANGLE_STRIP?T.geometry=xe(T.geometry,Mt):m.mode===b.TRIANGLE_FAN&&(T.geometry=xe(T.geometry,ke));else if(m.mode===b.LINES)T=new st(g,E);else if(m.mode===b.LINE_STRIP)T=new it(g,E);else if(m.mode===b.LINE_LOOP)T=new rt(g,E);else if(m.mode===b.POINTS)T=new ot(g,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(T.geometry.morphAttributes).length>0&&nn(T,r),T.name=t.createUniqueName(r.name||"mesh_"+e),O(T,r),m.extensions&&K(s,T,m),t.assignFinalMaterial(T),l.push(T)}for(let f=0,p=l.length;f<p;f++)t.associations.set(l[f],{meshes:e,primitives:f});if(l.length===1)return l[0];const h=new se;t.associations.set(h,{meshes:e});for(let f=0,p=l.length;f<p;f++)h.add(l[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Oe(at.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new ct(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),O(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(s){return i.inverseBindMatrices=s,i})}loadAnimation(e){const i=this.json.animations[e],s=[],r=[],o=[],c=[],a=[];for(let u=0,d=i.channels.length;u<d;u++){const l=i.channels[u],h=i.samplers[l.sampler],f=l.target,p=f.node!==void 0?f.node:f.id,g=i.parameters!==void 0?i.parameters[h.input]:h.input,m=i.parameters!==void 0?i.parameters[h.output]:h.output;s.push(this.getDependency("node",p)),r.push(this.getDependency("accessor",g)),o.push(this.getDependency("accessor",m)),c.push(h),a.push(f)}return Promise.all([Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(c),Promise.all(a)]).then(function(u){const d=u[0],l=u[1],h=u[2],f=u[3],p=u[4],g=[];for(let T=0,E=d.length;T<E;T++){const A=d[T],B=l[T],N=h[T],S=f[T],M=p[T];if(A===void 0)continue;A.updateMatrix(),A.matrixAutoUpdate=!0;let k;switch(I[M.path]){case I.weights:k=xt;break;case I.rotation:k=Te;break;case I.position:case I.scale:default:k=wt;break}const P=A.name?A.name:A.uuid,Be=S.interpolation!==void 0?$t[S.interpolation]:ve,W=[];I[M.path]===I.weights?A.traverse(function(x){x.isMesh===!0&&x.morphTargetInfluences&&W.push(x.name?x.name:x.uuid)}):W.push(P);let D=N.array;if(N.normalized){const x=ue(D.constructor),Y=new Float32Array(D.length);for(let L=0,me=D.length;L<me;L++)Y[L]=D[L]*x;D=Y}for(let x=0,Y=W.length;x<Y;x++){const L=new k(W[x]+"."+I[M.path],B.array,D,Be);S.interpolation==="CUBICSPLINE"&&(L.createInterpolant=function(je){const Ke=this instanceof Te?Zt:F;return new Ke(this.times,this.values,this.getValueSize()/3,je)},L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(L)}}const m=i.name?i.name:"animation_"+e;return new ut(m,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(c){if(c.isMesh)for(let a=0,u=s.weights.length;a<u;a++)c.morphTargetInfluences[a]=s.weights[a]}),o})}loadNode(e){const t=this.json,i=this.extensions,s=this,r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"";return function(){const c=[],a=s._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return a&&c.push(a),r.camera!==void 0&&c.push(s.getDependency("camera",r.camera).then(function(u){return s._getNodeRef(s.cameraCache,r.camera,u)})),s._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){c.push(u)}),Promise.all(c)}().then(function(c){let a;if(r.isBone===!0?a=new lt:c.length>1?a=new se:c.length===1?a=c[0]:a=new dt,a!==c[0])for(let u=0,d=c.length;u<d;u++)a.add(c[u]);if(r.name&&(a.userData.name=r.name,a.name=o),O(a,r),r.extensions&&K(i,a,r),r.matrix!==void 0){const u=new Fe;u.fromArray(r.matrix),a.applyMatrix4(u)}else r.translation!==void 0&&a.position.fromArray(r.translation),r.rotation!==void 0&&a.quaternion.fromArray(r.rotation),r.scale!==void 0&&a.scale.fromArray(r.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=e,a})}loadScene(e){const t=this.json,i=this.extensions,s=this.json.scenes[e],r=this,o=new se;s.name&&(o.name=r.createUniqueName(s.name)),O(o,s),s.extensions&&K(i,o,s);const c=s.nodes||[],a=[];for(let u=0,d=c.length;u<d;u++)a.push(De(c[u],o,t,r));return Promise.all(a).then(function(){const u=d=>{const l=new Map;for(const[h,f]of r.associations)(h instanceof ne||h instanceof ge)&&l.set(h,f);return d.traverse(h=>{const f=r.associations.get(h);f!=null&&l.set(h,f)}),l};return r.associations=u(o),o})}}function De(n,e,t,i){const s=t.nodes[n];return i.getDependency("node",n).then(function(r){if(s.skin===void 0)return r;let o;return i.getDependency("skin",s.skin).then(function(c){o=c;const a=[];for(let u=0,d=o.joints.length;u<d;u++)a.push(i.getDependency("node",o.joints[u]));return Promise.all(a)}).then(function(c){return r.traverse(function(a){if(!a.isMesh)return;const u=[],d=[];for(let l=0,h=c.length;l<h;l++){const f=c[l];if(f){u.push(f);const p=new Fe;o.inverseBindMatrices!==void 0&&p.fromArray(o.inverseBindMatrices.array,l*16),d.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[l])}a.bind(new ht(u,d),a.matrixWorld)}),r})}).then(function(r){e.add(r);const o=[];if(s.children){const c=s.children;for(let a=0,u=c.length;a<u;a++){const d=c[a];o.push(De(d,r,t,i))}}return Promise.all(o)})}function on(n,e,t){const i=e.attributes,s=new St;if(i.POSITION!==void 0){const c=t.json.accessors[i.POSITION],a=c.min,u=c.max;if(a!==void 0&&u!==void 0){if(s.set(new Q(a[0],a[1],a[2]),new Q(u[0],u[1],u[2])),c.normalized){const d=ue(X[c.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const c=new Q,a=new Q;for(let u=0,d=r.length;u<d;u++){const l=r[u];if(l.POSITION!==void 0){const h=t.json.accessors[l.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(a.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),a.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),a.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const g=ue(X[h.componentType]);a.multiplyScalar(g)}c.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(c)}n.boundingBox=s;const o=new bt;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function we(n,e,t){const i=e.attributes,s=[];function r(o,c){return t.getDependency("accessor",o).then(function(a){n.setAttribute(c,a)})}for(const o in i){const c=ce[o]||o.toLowerCase();c in n.attributes||s.push(r(i[o],c))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(c){n.setIndex(c)});s.push(o)}return O(n,e),on(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?tn(n,e.targets,t):n})}function xe(n,e){let t=n.getIndex();if(t===null){const o=[],c=n.getAttribute("position");if(c!==void 0){for(let a=0;a<c.count;a++)o.push(a);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===ke)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r}const re=new WeakMap;class an extends Re{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new $(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,c).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const r={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const a in t.attributeTypes){const u=t.attributeTypes[a];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[a]=u.name)}const i=JSON.stringify(t);if(re.has(e)){const a=re.get(e);if(a.key===i)return a.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,c=this._getWorker(r,o).then(a=>(s=a,new Promise((u,d)=>{s._callbacks[r]={resolve:u,reject:d},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return c.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),re.set(e,{key:i,promise:c}),c}_createGeometry(e){const t=new Ne;e.index&&t.setIndex(new te(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,o=s.array,c=s.itemSize;t.setAttribute(r,new te(o,c))}return t}_loadLibrary(e,t){const i=new $(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=cn.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function cn(){let n,e;onmessage=function(o){const c=o.data;switch(c.type){case"init":n=c.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(l){d({draco:l})},DracoDecoderModule(n)});break;case"decode":const a=c.buffer,u=c.taskConfig;e.then(d=>{const l=d.draco,h=new l.Decoder,f=new l.DecoderBuffer;f.Init(new Int8Array(a),a.byteLength);try{const p=t(l,h,f,u),g=p.attributes.map(m=>m.array.buffer);p.index&&g.push(p.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:p},g)}catch(p){console.error(p),self.postMessage({type:"error",id:c.id,error:p.message})}finally{l.destroy(f),l.destroy(h)}});break}};function t(o,c,a,u){const d=u.attributeIDs,l=u.attributeTypes;let h,f;const p=c.GetEncodedGeometryType(a);if(p===o.TRIANGULAR_MESH)h=new o.Mesh,f=c.DecodeBufferToMesh(a,h);else if(p===o.POINT_CLOUD)h=new o.PointCloud,f=c.DecodeBufferToPointCloud(a,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const g={index:null,attributes:[]};for(const m in d){const T=self[l[m]];let E,A;if(u.useUniqueIDs)A=d[m],E=c.GetAttributeByUniqueId(h,A);else{if(A=c.GetAttributeId(h,o[d[m]]),A===-1)continue;E=c.GetAttribute(h,A)}g.attributes.push(s(o,c,h,m,T,E))}return p===o.TRIANGULAR_MESH&&(g.index=i(o,c,h)),o.destroy(h),g}function i(o,c,a){const d=a.num_faces()*3,l=d*4,h=o._malloc(l);c.GetTrianglesUInt32Array(a,l,h);const f=new Uint32Array(o.HEAPF32.buffer,h,d).slice();return o._free(h),{array:f,itemSize:1}}function s(o,c,a,u,d,l){const h=l.num_components(),p=a.num_points()*h,g=p*d.BYTES_PER_ELEMENT,m=r(o,d),T=o._malloc(g);c.GetAttributeDataArrayForAllPoints(a,l,m,g,T);const E=new d(o.HEAPF32.buffer,T,p).slice();return o._free(T),{name:u,array:E,itemSize:h}}function r(o,c){switch(c){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const pe=new an,G=new vt;pe.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");pe.setDecoderConfig({type:"js"});G.setDRACOLoader(pe);const un=document.getElementById("container"),R=new It;R.background=new w("#c8f0f9");const ln=new Le().load("images/space.png");R.background=ln;const C=new Ct({antialias:!0});C.setPixelRatio(Math.min(window.devicePixelRatio,2));C.setSize(window.innerWidth,window.innerHeight);C.outputEncoding=ee;un.appendChild(C.domElement);const U=new Oe(35,window.innerWidth/window.innerHeight,.1,5e3);U.position.z=48;R.add(U);window.addEventListener("resize",()=>{const n=window.innerWidth,e=window.innerHeight;U.aspect=n/e,U.updateProjectionMatrix(),C.setSize(n,e),C.setPixelRatio(2)});const dn=new Nt(U,C.domElement),hn=new Ot(10526972,.82);R.add(hn);const Ue=new Se(15254395,1.96);Ue.position.set(-69,44,14);R.add(Ue);var z;G.load("models/gltf/pikachu/scene.gltf",function(n){z=n.scene,n.scene.scale.set(.2,.2,.2),R.add(n.scene)});var q;G.load("models/gltf/isabelle_animal_crossing/scene.gltf",function(n){q=n.scene,n.scene.position.y=-40,n.scene.position.x=-20,R.add(n.scene)});var J;G.load("models/gltf/bob/scene.gltf",function(n){J=n.scene,n.scene.scale.set(1.2,1.2,1.2),n.scene.position.z=10,n.scene.position.y=-10,n.scene.position.x=-200,n.scene.rotation.z+=-36.3,n.scene.rotation.y+=-59,R.add(n.scene)});var Z;G.load("models/gltf/donut_2.0/scene.gltf",function(n){Z=n.scene,n.scene.scale.set(40,40,40),n.scene.position.y=10,n.scene.position.z=-10,n.scene.position.x=20,n.scene.rotation.z+=70,R.add(n.scene)});var le;G.load("models/gltf/brown_glazed_donut/scene.gltf",function(n){le=n.scene,n.scene.scale.set(5,5,5),n.scene.position.y=-10,n.scene.position.z=10,n.scene.position.x=-10,n.scene.rotation.z+=-70,R.add(n.scene)});function He(){y.update(),dn.update(),z&&(z.rotation.y+=.0025,z.position.x+=.0069,z.position.y+=.0069),q&&(q.rotation.y+=.0025,q.position.x+=.013,q.position.y+=.013),J&&(J.rotation.x+=.071,J.position.x+=.07),Z&&(Z.rotation.x+=.0031,Z.rotation.y+=.003),le&&(le.rotation.x+=1e-4),C.render(R,U),requestAnimationFrame(He)}He()});export default fn();
